<Window x:Class="RemoteAdmin.Server.AudioMonitorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Audio Monitor" Height="450" Width="700"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2D2D30" Padding="10" CornerRadius="4" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="🎤 Audio Monitor" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Listen to microphone and system audio from the remote computer" 
                          FontSize="12" Foreground="#808080" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Audio Sources Panel -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="10"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Microphone Panel -->
            <Border Grid.Row="0" Background="#252526" BorderBrush="#3F3F46" BorderThickness="2" CornerRadius="4" Padding="15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="🎤" FontSize="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBlock Text="Microphone" FontSize="16" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Status -->
                    <Border Grid.Row="1" Background="#1E1E1E" Padding="10" CornerRadius="4" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock x:Name="MicStatusText" Text="● Stopped" Foreground="#808080" FontWeight="Bold"/>
                            <TextBlock x:Name="MicInfoText" Text="Sample Rate: -- | Channels: --" 
                                      Foreground="#9CDCFE" Margin="0,5,0,0" FontSize="11"/>
                        </StackPanel>
                    </Border>

                    <!-- Volume Meter -->
                    <Border Grid.Row="2" Background="#1E1E1E" Padding="10" CornerRadius="4" Margin="0,0,0,15">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="Audio Level" Foreground="White" FontSize="12" Margin="0,0,0,5"/>
                            <ProgressBar Grid.Row="1" x:Name="MicVolumeBar" Height="30" 
                                        Background="#252526" Foreground="#4EC9B0" 
                                        Minimum="0" Maximum="100" Value="0"/>
                        </Grid>
                    </Border>

                    <!-- Controls -->
                    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="StartMicButton" Content="▶ Start" Width="100" Height="35" 
                                Click="StartMicButton_Click" Margin="0,0,10,0"
                                Background="#0E7A0D" Foreground="White" BorderThickness="0" FontWeight="Bold"/>
                        <Button x:Name="StopMicButton" Content="⬛ Stop" Width="100" Height="35" 
                                Click="StopMicButton_Click" IsEnabled="False"
                                Background="#A80000" Foreground="White" BorderThickness="0" FontWeight="Bold"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- System Audio Panel -->
            <Border Grid.Row="2" Background="#252526" BorderBrush="#3F3F46" BorderThickness="2" CornerRadius="4" Padding="15">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Title -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="🔊" FontSize="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBlock Text="System Audio" FontSize="16" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Status -->
                    <Border Grid.Row="1" Background="#1E1E1E" Padding="10" CornerRadius="4" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock x:Name="SystemAudioStatusText" Text="● Stopped" Foreground="#808080" FontWeight="Bold"/>
                            <TextBlock x:Name="SystemAudioInfoText" Text="Sample Rate: -- | Channels: --" 
                                      Foreground="#9CDCFE" Margin="0,5,0,0" FontSize="11"/>
                        </StackPanel>
                    </Border>

                    <!-- Volume Meter -->
                    <Border Grid.Row="2" Background="#1E1E1E" Padding="10" CornerRadius="4" Margin="0,0,0,15">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="0" Text="Audio Level" Foreground="White" FontSize="12" Margin="0,0,0,5"/>
                            <ProgressBar Grid.Row="1" x:Name="SystemAudioVolumeBar" Height="30" 
                                        Background="#252526" Foreground="#CE9178" 
                                        Minimum="0" Maximum="100" Value="0"/>
                        </Grid>
                    </Border>

                    <!-- Controls -->
                    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="StartSystemAudioButton" Content="▶ Start" Width="100" Height="35" 
                                Click="StartSystemAudioButton_Click" Margin="0,0,10,0"
                                Background="#0E7A0D" Foreground="White" BorderThickness="0" FontWeight="Bold"/>
                        <Button x:Name="StopSystemAudioButton" Content="⬛ Stop" Width="100" Height="35" 
                                Click="StopSystemAudioButton_Click" IsEnabled="False"
                                Background="#A80000" Foreground="White" BorderThickness="0" FontWeight="Bold"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- Footer -->
        <Border Grid.Row="2" Background="#2D2D30" Padding="10" CornerRadius="4" Margin="0,10,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="💡 Tip: You can stream both sources simultaneously" 
                          Foreground="#808080" FontSize="11" VerticalAlignment="Center"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <TextBlock x:Name="PacketsReceivedText" Text="Packets: 0" Foreground="#9CDCFE" 
                              VerticalAlignment="Center" Margin="0,0,20,0"/>
                    <TextBlock x:Name="BufferStatusText" Text="Buffer: OK" Foreground="#4EC9B0" 
                              VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
